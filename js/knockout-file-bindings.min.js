!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),require("jquery")):"function"==typeof define&&define.amd?define(["knockout","jquery"],e):e(ko,jQuery)}(function(e,t){var a={customFileInputSystemOptions:{wrapperClass:"custom-file-input-wrapper",fileNameClass:"custom-file-input-file-name",buttonGroupClass:"custom-file-input-button-group",buttonClass:"custom-file-input-button",clearButtonClass:"custom-file-input-clear-button",buttonTextClass:"custom-file-input-button-text"},defaultOptions:{wrapperClass:"input-group",fileNameClass:"disabled form-control",noFileText:"No file chosen",buttonGroupClass:"input-group-btn",buttonClass:"btn btn-primary",clearButtonClass:"btn btn-default",buttonText:"Choose File",changeButtonText:"Change",clearButtonText:"Clear",fileName:!0,clearButton:!0,onClear:function(e,t){"function"==typeof e.clear&&e.clear()}}},n=[],s=window.URL||window.webkitURL;return e.bindingHandlers.fileInput={init:function(a,n){a.onchange=function(){var r=e.utils.unwrapObservable(n())||{};r.dataUrl&&(r.dataURL=r.dataUrl),r.objectUrl&&(r.objectURL=r.objectUrl),r.file=r.file||e.observable();var l=this.files[0];l&&r.file(l),r.clear||(r.clear=function(){t.each(["file","objectURL","base64String","binaryString","text","dataURL","arrayBuffer"],function(t,a){r[a]&&e.isObservable(r[a])&&("objectURL"==a&&s.revokeObjectURL(r.objectURL()),r[a](null))}),a.value=""}),e.isObservable(n())&&n()(r)},a.onchange()},update:function(t,a,r){var l=e.utils.unwrapObservable(a()),i=e.isObservable(l.file)&&l.file();if(i&&(console.log("Adding a new file to the images collection!"),n.push(i),console.log("A new file has been added to the images collection!!!!")),l.objectURL&&e.isObservable(l.objectURL)){var o=i&&s.createObjectURL(i);if(o){var u=l.objectURL();u&&s.revokeObjectURL(u),l.objectURL(o)}}l.base64String&&e.isObservable(l.base64String)&&(l.dataURL&&e.isObservable(l.dataURL)||(l.dataURL=e.observable())),["binaryString","text","dataURL","arrayBuffer"].forEach(function(t){var a="readAs"+(t.substr(0,1).toUpperCase()+t.substr(1));if(!("dataURL"==t||l[t]&&e.isObservable(l[t])))return!0;if(!i)return!0;var n=new FileReader;n.onload=function(n){if(l[t]&&l[t](n.target.result),"readAsDataURL"==a&&l.base64String&&e.isObservable(l.base64String)){var s=n.target.result.split(",");2===s.length&&l.base64String(s[1])}},n[a](i)})}},e.bindingHandlers.fileDrag={update:function(a,n,s){var r=e.utils.unwrapObservable(n())||{};t(a).data("fileDragInjected")||(a.classList.add("filedrag"),a.ondragover=a.ondragleave=a.ondrop=function(t){if(t.stopPropagation(),t.preventDefault(),"dragover"==t.type?a.classList.add("hover"):a.classList.remove("hover"),"drop"==t.type&&t.dataTransfer){var s=t.dataTransfer.files,l=s[0];l&&(r.file(l),e.isObservable(n())&&n()(r))}},t(a).data("fileDragInjected",!0))}},e.bindingHandlers.customFileInput={init:function(n,s,r){if(e.utils.unwrapObservable(s())!==!1){var l=a.customFileInputSystemOptions,i=a.defaultOptions,o=t(n),u=t("<span>").addClass(l.wrapperClass).addClass(i.wrapperClass),b=t("<span>").addClass(l.buttonGroupClass).addClass(i.buttonGroupClass);b.append(t("<span>").addClass(l.buttonClass)),o.wrap(u).wrap(b);var b=o.parent("."+l.buttonClass).parent();b.before(t("<input>").attr("type","text").attr("disabled","disabled").addClass(l.fileNameClass)),o.before(t("<span>").addClass(l.buttonTextClass))}},update:function(n,s,r){var l=e.utils.unwrapObservable(s());if(l!==!1){l=l||{},l&&"object"!=typeof l&&(l={});var i=a.customFileInputSystemOptions,o=a.defaultOptions;l=t.extend({},o,l);var u=r();if(u.fileInput){var b=e.utils.unwrapObservable(u.fileInput)||{},p=e.utils.unwrapObservable(b.file),d=t(n).parent(),f=d.parent(),c=f.parent();d.addClass(e.utils.unwrapObservable(l.buttonClass)),d.find("."+i.buttonTextClass).html(e.utils.unwrapObservable(p?l.changeButtonText:l.buttonText));var v=c.find("."+i.fileNameClass);v.addClass(e.utils.unwrapObservable(l.fileNameClass)),p&&p.name?v.val(p.name):v.val(e.utils.unwrapObservable(l.noFileText));var C=f.find("."+i.clearButtonClass);C.length||(C=t("<span>").addClass(i.clearButtonClass),C.on("click",function(e){l.onClear(b,l)}),f.append(C)),C.html(e.utils.unwrapObservable(l.clearButtonText)),C.addClass(e.utils.unwrapObservable(l.clearButtonClass)),p&&l.clearButton&&p.name||C.remove()}}}},e.fileBindings=a,a});